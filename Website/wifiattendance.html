<!DOCTYPE html>
<html>
    <head>
        <script src="https://unpkg.com/jquery@3.5.0/dist/jquery.js"></script>
    </head>
    <body>
        <h2>
            Demo Dashboard
        </h2>
        <p>
            Check the console/uri
        </p>
        <script>
            function findGetParameter(parameterName) {
                var result = null,
                    tmp = [];
                var items = location.search.substr(1).split("&");
                for (var index = 0; index < items.length; index++) {
                    tmp = items[index].split("=");
                    if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
                }
                return result;
            }
            $(document).ready(() => {
                // const code = findGetParameter('code')
                // const scope = 'fhict fhict_personal fhict_location'
                // const clientid = 'i414719-fontyswifi'
                // const redirect_uri = 'http://localhost:8080/wifiattendence'
                // const client_secret = 'Rqa2hSKG50iVrdu1aapeBecljWoVIjJfQDyLTvr7' //! WARNING ! This shouldn't be exposed
                // let body = encodeURI(`grant_type=authorization_code&code=${code}&redirect_uri=${redirect_uri}&client_id=${clientid}&client_secret=${client_secret}`)
                // // 'grant_type=authorization_code&code=${code}&redirect_uri=https%3A//i414719.hera.fhict.nl/wifiattendance&client_id=i414719-fontyswifi&client_secret=Rqa2hSKG50iVrdu1aapeBecljWoVIjJfQDyLTvr7'
                // console.log(body)
                // jQuery.get('localhost:3000/token', body, (data, status, xhr) => {
                //     console.log(data, status)
                // })

                var settings = {
                "url": "localhost:3000/token/"+findGetParameter('code'),
                "method": "GET",
                "timeout": 0,
                };

                $.ajax(settings).done(function (response) {
                console.log(response);
                });
            })
        </script>
    </body>
</html>